CREATE TABLE TIPOCONTRATO(
        ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
        NAME VARCHAR(255),
        COMPENSATIONDAYSPERYEAR DOUBLE  
);
	
CREATE TABLE CATEGORIACONTRATO(
        ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
        NAME VARCHAR(255),
        TRIENIUMSALARY DOUBLE,
        PRODUCTIVITYPLUS DOUBLE        
);

CREATE TABLE CONTRATO(
        ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
        IDCATEGORIA BIGINT,
        IDTIPOCONTRATO BIGINT,
        IDMECANICO BIGINT,
        STARTDATE DATE,
        ENDDATE DATE,
        BASESALARYPERYEAR DOUBLE,
        COMPENSATION DOUBLE DEFAULT 0,
        CONTRACTSTATUS VARCHAR(255) DEFAULT 'ACTIVE',
        CONSTRAINT FK_CONTRATO_CATEGORIA FOREIGN KEY (IDCATEGORIA) REFERENCES CATEGORIACONTRATO(ID),
        CONSTRAINT FK_CONTRATO_TIPOCONTRATO FOREIGN KEY (IDTIPOCONTRATO) REFERENCES TIPOCONTRATO(ID),  
        CONSTRAINT FK_CONTRATO_MECANICO FOREIGN KEY (IDMECANICO) REFERENCES TMECANICOS(ID),
        CONSTRAINT CH_STATUS check (CONTRACTSTATUS in ('ACTIVE', 'FINISHED'))
);

CREATE TABLE NOMINA(
        ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL PRIMARY KEY,
        IDCONTRATO BIGINT,
        FECHA DATE,
        BASESALARY DOUBLE,
        EXTRASALARY DOUBLE,
        PRODUCTIVITY DOUBLE,
        TRIENIUMS DOUBLE,
        IRPF DOUBLE,
        SOCIALSECURITY DOUBLE,
        CONSTRAINT FK_NOMINA_CONTRATO FOREIGN KEY (IDCONTRATO) REFERENCES CONTRATO (ID)
);