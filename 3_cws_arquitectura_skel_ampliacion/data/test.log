/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
CREATE TABLE TRECOMENDACIONES (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, USADA_BONO BOOLEAN, RECOMENDADOS_ID BIGINT, RECOMENDADOR_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSUSTITUCIONES (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CANTIDAD INTEGER, INTERVENCION_ID BIGINT, REPUESTO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TMEDIOSPAGO (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, DTYPE VARCHAR(31), ACUMULADO REAL, CLIENTE_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TMETALICOS (ID BIGINT NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TTARJETASCREDITO (ID BIGINT NOT NULL, NUMERO VARCHAR(255), TIPO VARCHAR(255), VALIDEZ DATE, PRIMARY KEY (ID))
CREATE TABLE TCLIENTES (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, APELLIDOS VARCHAR(255), DNI VARCHAR(255), EMAIL VARCHAR(255), NOMBRE VARCHAR(255), PHONE VARCHAR(255), CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), RRECIBIDA_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCARGOS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, IMPORTE REAL, FACTURA_ID BIGINT, MEDIOPAGO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TMECANICOS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, APELLIDOS VARCHAR(255), DNI VARCHAR(255), NOMBRE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TTIPOSVEHICULO (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, NOMBRE VARCHAR(255), PRECIOHORA REAL, PRIMARY KEY (ID))
CREATE TABLE TINTERVENCIONES (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, MINUTOS INTEGER, AVERIA_ID BIGINT, MECANICO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TREPUESTOS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, CODIGO VARCHAR(255), DESCRIPCION VARCHAR(255), PRECIO REAL, PRIMARY KEY (ID))
CREATE TABLE TVEHICULOS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, MARCA VARCHAR(255), MATRICULA VARCHAR(255), MODELO VARCHAR(255), NUM_AVERIAS INTEGER, CLIENTE_ID BIGINT, TIPO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TBONOS (ID BIGINT NOT NULL, CODIGO VARCHAR(255), DESCRIPCION VARCHAR(255), DISPONIBLE REAL, PRIMARY KEY (ID))
CREATE TABLE TAVERIAS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, DESCRIPCION VARCHAR(255), FECHA DATE, IMPORTE REAL, STATUS VARCHAR(255), USADA_BONO BOOLEAN, FACTURA_ID BIGINT, MECANICO_ID BIGINT, VEHICULO_ID BIGINT, PRIMARY KEY (ID))
CREATE TABLE TFACTURAS (ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL, FECHA DATE, IMPORTE REAL, IVA REAL, NUMERO BIGINT, STATUS VARCHAR(255), USADA_BONO BOOLEAN, PRIMARY KEY (ID))
ALTER TABLE TSUSTITUCIONES ADD CONSTRAINT UNQ_TSUSTITUCIONES_0 UNIQUE (REPUESTO_ID, INTERVENCION_ID)
ALTER TABLE TTARJETASCREDITO ADD CONSTRAINT UNQ_TTARJETASCREDITO_1 UNIQUE (NUMERO)
ALTER TABLE TCLIENTES ADD CONSTRAINT UNQ_TCLIENTES_2 UNIQUE (DNI)
ALTER TABLE TMECANICOS ADD CONSTRAINT UNQ_TMECANICOS_2 UNIQUE (DNI)
ALTER TABLE TTIPOSVEHICULO ADD CONSTRAINT UNQ_TTIPOSVEHICULO_1 UNIQUE (NOMBRE)
ALTER TABLE TINTERVENCIONES ADD CONSTRAINT UNQ_TINTERVENCIONES_0 UNIQUE (AVERIA_ID, MECANICO_ID)
ALTER TABLE TREPUESTOS ADD CONSTRAINT UNQ_TREPUESTOS_1 UNIQUE (CODIGO)
ALTER TABLE TVEHICULOS ADD CONSTRAINT UNQ_TVEHICULOS_2 UNIQUE (MATRICULA)
ALTER TABLE TBONOS ADD CONSTRAINT UNQ_TBONOS_1 UNIQUE (CODIGO)
ALTER TABLE TAVERIAS ADD CONSTRAINT UNQ_TAVERIAS_0 UNIQUE (VEHICULO_ID, FECHA)
ALTER TABLE TFACTURAS ADD CONSTRAINT UNQ_TFACTURAS_4 UNIQUE (NUMERO)
ALTER TABLE TRECOMENDACIONES ADD CONSTRAINT FK_TRECOMENDACIONES_RECOMENDADOS_ID FOREIGN KEY (RECOMENDADOS_ID) REFERENCES TCLIENTES (ID)
ALTER TABLE TRECOMENDACIONES ADD CONSTRAINT FK_TRECOMENDACIONES_RECOMENDADOR_ID FOREIGN KEY (RECOMENDADOR_ID) REFERENCES TCLIENTES (ID)
ALTER TABLE TSUSTITUCIONES ADD CONSTRAINT FK_TSUSTITUCIONES_INTERVENCION_ID FOREIGN KEY (INTERVENCION_ID) REFERENCES TINTERVENCIONES (ID)
ALTER TABLE TSUSTITUCIONES ADD CONSTRAINT FK_TSUSTITUCIONES_REPUESTO_ID FOREIGN KEY (REPUESTO_ID) REFERENCES TREPUESTOS (ID)
ALTER TABLE TMEDIOSPAGO ADD CONSTRAINT FK_TMEDIOSPAGO_CLIENTE_ID FOREIGN KEY (CLIENTE_ID) REFERENCES TCLIENTES (ID)
ALTER TABLE TMETALICOS ADD CONSTRAINT FK_TMETALICOS_ID FOREIGN KEY (ID) REFERENCES TMEDIOSPAGO (ID)
ALTER TABLE TTARJETASCREDITO ADD CONSTRAINT FK_TTARJETASCREDITO_ID FOREIGN KEY (ID) REFERENCES TMEDIOSPAGO (ID)
ALTER TABLE TCLIENTES ADD CONSTRAINT FK_TCLIENTES_RRECIBIDA_ID FOREIGN KEY (RRECIBIDA_ID) REFERENCES TRECOMENDACIONES (ID)
ALTER TABLE TCARGOS ADD CONSTRAINT FK_TCARGOS_FACTURA_ID FOREIGN KEY (FACTURA_ID) REFERENCES TFACTURAS (ID)
ALTER TABLE TCARGOS ADD CONSTRAINT FK_TCARGOS_MEDIOPAGO_ID FOREIGN KEY (MEDIOPAGO_ID) REFERENCES TMEDIOSPAGO (ID)
ALTER TABLE TINTERVENCIONES ADD CONSTRAINT FK_TINTERVENCIONES_MECANICO_ID FOREIGN KEY (MECANICO_ID) REFERENCES TMECANICOS (ID)
ALTER TABLE TINTERVENCIONES ADD CONSTRAINT FK_TINTERVENCIONES_AVERIA_ID FOREIGN KEY (AVERIA_ID) REFERENCES TAVERIAS (ID)
ALTER TABLE TVEHICULOS ADD CONSTRAINT FK_TVEHICULOS_TIPO_ID FOREIGN KEY (TIPO_ID) REFERENCES TTIPOSVEHICULO (ID)
ALTER TABLE TVEHICULOS ADD CONSTRAINT FK_TVEHICULOS_CLIENTE_ID FOREIGN KEY (CLIENTE_ID) REFERENCES TCLIENTES (ID)
ALTER TABLE TBONOS ADD CONSTRAINT FK_TBONOS_ID FOREIGN KEY (ID) REFERENCES TMEDIOSPAGO (ID)
ALTER TABLE TAVERIAS ADD CONSTRAINT FK_TAVERIAS_FACTURA_ID FOREIGN KEY (FACTURA_ID) REFERENCES TFACTURAS (ID)
ALTER TABLE TAVERIAS ADD CONSTRAINT FK_TAVERIAS_VEHICULO_ID FOREIGN KEY (VEHICULO_ID) REFERENCES TVEHICULOS (ID)
ALTER TABLE TAVERIAS ADD CONSTRAINT FK_TAVERIAS_MECANICO_ID FOREIGN KEY (MECANICO_ID) REFERENCES TMECANICOS (ID)
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(1,'','a',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(1,'Metalico',0.0E0,1)
INSERT INTO TMETALICOS VALUES(1)
COMMIT
/*C6*/SET SCHEMA PUBLIC
DELETE FROM TMETALICOS WHERE ID=1
COMMIT
DELETE FROM TMEDIOSPAGO WHERE ID=1
COMMIT
DELETE FROM TCLIENTES WHERE ID=1
COMMIT
/*C5*/INSERT INTO TCLIENTES VALUES(2,'','a',NULL,'a',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(2,'Metalico',0.0E0,2)
INSERT INTO TMETALICOS VALUES(2)
COMMIT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(3,'','r',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(3,'Metalico',0.0E0,3)
INSERT INTO TMETALICOS VALUES(3)
COMMIT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/DELETE FROM TMETALICOS WHERE ID=2
DELETE FROM TMETALICOS WHERE ID=3
COMMIT
DELETE FROM TMEDIOSPAGO WHERE ID=2
DELETE FROM TMEDIOSPAGO WHERE ID=3
COMMIT
DELETE FROM TCLIENTES WHERE ID=2
DELETE FROM TCLIENTES WHERE ID=3
COMMIT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C5*/DISCONNECT
/*C8*/DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C26*/SET SCHEMA PUBLIC
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
DISCONNECT
/*C28*/SET SCHEMA PUBLIC
DISCONNECT
/*C29*/SET SCHEMA PUBLIC
DISCONNECT
/*C30*/SET SCHEMA PUBLIC
DISCONNECT
/*C31*/SET SCHEMA PUBLIC
DISCONNECT
/*C32*/SET SCHEMA PUBLIC
DISCONNECT
/*C33*/SET SCHEMA PUBLIC
DISCONNECT
/*C34*/SET SCHEMA PUBLIC
DISCONNECT
/*C35*/SET SCHEMA PUBLIC
DISCONNECT
/*C36*/SET SCHEMA PUBLIC
DISCONNECT
/*C37*/SET SCHEMA PUBLIC
DISCONNECT
/*C38*/SET SCHEMA PUBLIC
DISCONNECT
/*C39*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(4,'','1',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(4,'Metalico',0.0E0,4)
INSERT INTO TMETALICOS VALUES(4)
COMMIT
DISCONNECT
/*C40*/SET SCHEMA PUBLIC
DISCONNECT
/*C41*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(5,'','5893',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(5,'Metalico',0.0E0,5)
INSERT INTO TMETALICOS VALUES(5)
COMMIT
DISCONNECT
/*C6*/DELETE FROM TMETALICOS WHERE ID=4
DELETE FROM TMETALICOS WHERE ID=5
COMMIT
DELETE FROM TMEDIOSPAGO WHERE ID=4
DELETE FROM TMEDIOSPAGO WHERE ID=5
COMMIT
DELETE FROM TCLIENTES WHERE ID=4
DELETE FROM TCLIENTES WHERE ID=5
COMMIT
/*C42*/SET SCHEMA PUBLIC
DISCONNECT
/*C43*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(6,'','1',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(6,'Metalico',0.0E0,6)
INSERT INTO TMETALICOS VALUES(6)
COMMIT
DISCONNECT
/*C44*/SET SCHEMA PUBLIC
DISCONNECT
/*C45*/SET SCHEMA PUBLIC
DISCONNECT
/*C46*/SET SCHEMA PUBLIC
DISCONNECT
/*C47*/SET SCHEMA PUBLIC
DISCONNECT
/*C48*/SET SCHEMA PUBLIC
DISCONNECT
/*C49*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(8,'','ewr',NULL,'',NULL,'','','',NULL)
DELETE FROM TCLIENTES WHERE ID=8
INSERT INTO TCLIENTES VALUES(2,'','ewr',NULL,'',NULL,'','','',NULL)
COMMIT
/*C6*/DELETE FROM TMETALICOS WHERE ID=6
COMMIT
DELETE FROM TMEDIOSPAGO WHERE ID=6
COMMIT
/*C49*/DISCONNECT
/*C50*/SET SCHEMA PUBLIC
DISCONNECT
/*C51*/SET SCHEMA PUBLIC
DISCONNECT
/*C52*/SET SCHEMA PUBLIC
DISCONNECT
/*C53*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(10,'','96',NULL,'',NULL,'','','',NULL)
DELETE FROM TCLIENTES WHERE ID=10
INSERT INTO TCLIENTES VALUES(3,'','96',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(9,'Metalico',0.0E0,3)
INSERT INTO TMETALICOS VALUES(9)
COMMIT
/*C6*/DELETE FROM TMETALICOS WHERE ID=9
COMMIT
DELETE FROM TMEDIOSPAGO WHERE ID=9
COMMIT
DELETE FROM TCLIENTES WHERE ID=2
DELETE FROM TCLIENTES WHERE ID=3
DELETE FROM TCLIENTES WHERE ID=6
COMMIT
/*C53*/INSERT INTO TCLIENTES VALUES(11,'','a',NULL,'',NULL,'','','',NULL)
DELETE FROM TCLIENTES WHERE ID=11
INSERT INTO TCLIENTES VALUES(1,'','a',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(10,'Metalico',0.0E0,1)
INSERT INTO TMETALICOS VALUES(10)
COMMIT
DISCONNECT
/*C54*/SET SCHEMA PUBLIC
DISCONNECT
/*C55*/SET SCHEMA PUBLIC
DISCONNECT
/*C56*/SET SCHEMA PUBLIC
DISCONNECT
/*C57*/SET SCHEMA PUBLIC
DISCONNECT
/*C58*/SET SCHEMA PUBLIC
DISCONNECT
/*C59*/SET SCHEMA PUBLIC
DISCONNECT
/*C60*/SET SCHEMA PUBLIC
DISCONNECT
/*C61*/SET SCHEMA PUBLIC
DISCONNECT
/*C62*/SET SCHEMA PUBLIC
DISCONNECT
/*C63*/SET SCHEMA PUBLIC
DISCONNECT
/*C64*/SET SCHEMA PUBLIC
DISCONNECT
/*C65*/SET SCHEMA PUBLIC
DISCONNECT
/*C66*/SET SCHEMA PUBLIC
DISCONNECT
/*C67*/SET SCHEMA PUBLIC
DISCONNECT
/*C68*/SET SCHEMA PUBLIC
DISCONNECT
/*C69*/SET SCHEMA PUBLIC
DISCONNECT
/*C70*/SET SCHEMA PUBLIC
DISCONNECT
/*C71*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(14,'','b',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(11,'Metalico',0.0E0,14)
INSERT INTO TMETALICOS VALUES(11)
COMMIT
DISCONNECT
/*C72*/SET SCHEMA PUBLIC
DISCONNECT
/*C73*/SET SCHEMA PUBLIC
DISCONNECT
/*C74*/SET SCHEMA PUBLIC
DISCONNECT
/*C75*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(15,'','c',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(12,'Metalico',0.0E0,15)
INSERT INTO TMETALICOS VALUES(12)
COMMIT
DISCONNECT
/*C76*/SET SCHEMA PUBLIC
DISCONNECT
/*C77*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(16,'','h',NULL,'',NULL,'','','',NULL)
INSERT INTO TRECOMENDACIONES VALUES(1,FALSE,1,16)
DELETE FROM TCLIENTES WHERE ID=16
INSERT INTO TCLIENTES VALUES(16,'','h',NULL,'',NULL,'','','',1)
INSERT INTO TMEDIOSPAGO VALUES(13,'Metalico',0.0E0,16)
INSERT INTO TMETALICOS VALUES(13)
COMMIT
/*C6*/DISCONNECT
/*C77*/DISCONNECT
/*C78*/SET SCHEMA PUBLIC
DISCONNECT
/*C79*/SET SCHEMA PUBLIC
INSERT INTO TCLIENTES VALUES(17,'1','fdgfd',NULL,'',NULL,'','','',NULL)
INSERT INTO TMEDIOSPAGO VALUES(14,'Metalico',0.0E0,17)
INSERT INTO TMETALICOS VALUES(14)
COMMIT
DISCONNECT
/*C80*/SET SCHEMA PUBLIC
DISCONNECT
/*C81*/SET SCHEMA PUBLIC
DISCONNECT
/*C82*/SET SCHEMA PUBLIC
DISCONNECT
/*C84*/SET SCHEMA PUBLIC
DISCONNECT
/*C85*/SET SCHEMA PUBLIC
DISCONNECT
/*C83*/SET SCHEMA PUBLIC
DISCONNECT
